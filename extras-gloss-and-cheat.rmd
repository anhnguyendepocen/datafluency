```{r, include=F}
library(tidyverse)
library(webex)
```

<!--

## Glossary


### Aesthetics and `aes` in ggplot

Aesthetics means how things look. In ggplot the `aes` command creates a mapping between variables in
a dataset and the visual features (aesthetics) of the plot

 -->

## Cheatsheet

This covers everything we have done to-date (or will soon), in abbreviated form. You will need to
load tidyverse for most of these examples:

```{r}
library(tidyverse)
```

### Basics

Assign a value to a name (variable):

```{r}
meaningoflife <- 43
```

Simple arithmetic

```{r}
2+2
2*2
2^3 # 2 cubed
```

Compare values:

```{r}
2 == 2  # note the doubled = sign
2 != 4  # 2 is not equal to 4
2 > 2
2 >= 2
```

### Sequences

```{r}
1:10
seq(1,10)
seq(1,100, by=7) # 7 times table
```

For strings use `c()`

```{r}
c("Wibble", "Wobble", "Nobble")
```

Combinations of sequences:

```{r}
expand.grid(
   colour=c("Red", "Green"),
   position=c("Top", "Bottom"))
```

### Randomness

A random sample:

```{r}
sample(1:20)
```

Random-normal numbers:

```{r}
rnorm(n=20, mean=0, sd=5)
rnorm(20, 0, 5)  # equivalent to line above(but this is a different sample!)
```

Other types of random numbers:

```{r}
runif(10)
rbinom(10, size=1, prob=.5) # like a coin toss where 1=heads
rbinom(10, size=5, prob=.5) # like best of 5 coin tosses
```

### Loading data

CSV:

```{r, eval=F}
df <- read_csv('filename.csv') # from a file on your server account
df <- read_csv('<URL>') # direct from the web
```

SPSS:

```{r}
library(haven)  # load haven first
df_from_spss <- read_spss('filename.sav')
```

Excel (note different sheets are loaded from same file):

```{r}
expt1 <- read_excel('simple-excel-example.xlsx', sheet="Experiment 1")
expt2 <- read_excel('simple-excel-example.xlsx', sheet="Experiment 2")
```

### Plotting

Density with colours

```{r}
diamonds  %>%
  ggplot(aes(x=price, y=..scaled.., color=factor(color))) +
  geom_density()
```

Scatterplot, with facets:

```{r}
diamonds %>%
  ggplot(aes(x=carat, y=price)) +
  geom_point() +
  facet_wrap(~color)
```

Boxplot, with added line:

```{r}
diamonds %>%
  ggplot(aes(x=cut, y=carat)) +
  geom_boxplot() +
  geom_hline(yintercept=.5, color="red", linetype="dotted")
```

Scatterplot with logarithmic scale on x axis, with point sizes scaled (to country-size `pop`):

```{r}
gapminder::gapminder %>%
  filter(year==2002) %>%
  ggplot(aes(gdpPercap, lifeExp, size=pop)) +
  geom_point() +
  scale_x_log10()
```
